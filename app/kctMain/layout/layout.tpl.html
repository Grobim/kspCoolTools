<div layout="row" layout-fill>

  
  <md-sidenav class="md-sidenav-left md-whiteframe-z2"
              md-component-id="mainMenu"
              md-is-locked-open="$mdMedia('gt-md')">
    
    <md-toolbar md-scroll-shrink>
      <div class="md-toolbar-tools" ng-click="layoutCtrl.toggleNavbar()">
        <span translate>kct.layout.common.appName</span>
      </div>
    </md-toolbar>
    
    <md-content role="navigation">
      <ul class="side-menu">
        <li ng-repeat="section in layoutCtrl.menuStates"
            class="parent-list-item"
            ng-class="{parentActive  : layoutCtrl.isSectionSelected(section),
                       'border-less' : section.borderLess}"
            ng-if="layoutCtrl.userHasAuthRights(section)">
          <h2 class="menu-heading" ng-if="section.type === 'heading'"
              id="heading_{{ section.name | nospace }}">
            <span translate>{{section.name | translate}}</span>
          </h2>
          <kct-menu-link section="section"
                         ng-if="section.type === 'link'"></kct-menu-link>
          <kct-menu-toggle section="section"
                           ng-if="section.type === 'toggle'"
                           is-open="layoutCtrl.isOpen(section)"
                           toggle="layoutCtrl.toggleOpen(section)"></kct-menu-toggle>
        </li>
        <li ng-show-auth>
          <md-button flex layout="row" ng-click="layoutCtrl.logout()">
            <md-icon md-font-set="fa fa-chevron-down"></md-icon>
            <span translate>kct.layout.header.logout</span>
          </md-button>
        </li>
        <li class="lang-selector" layout="row">
          <md-button disabled class="md-icon my-icon-button" aria-label="Bookmark" flex="none">
            <img ng-src="images/flags/22x14/{{layoutCtrl.selectedItem.flag}}.png" alt="Bookmark">
          </md-button>
          <md-autocomplete
            md-selected-item="layoutCtrl.selectedItem"
            md-search-text="layoutCtrl.searchText"
            md-selected-item-change="layoutCtrl.changeLang(item)"
            md-items="item in layoutCtrl.querySearch(layoutCtrl.searchText)"
            md-item-text="item.translation"
            md-min-length="0"
            flex="">
          <md-item-template>
            <span md-highlight-text="layoutCtrl.searchText" md-highlight-flags="^i">
              {{item.translation}}
            </span>
          </md-item-template>
          <md-not-found>
            No language matching "{{layoutCtrl.searchText}}" were found.
          </md-not-found>
        </md-autocomplete>
        </li>
      </ul>
    </md-content>
  </md-sidenav>
  <div layout="column" layout-fill style="overflow:auto;">

    <md-toolbar hide-gt-md="">
      <div class="md-toolbar-tools">
        <md-button ng-click="layoutCtrl.toggleNavbar()" class="md-icon-button" hide-gt-md="" aria-label="Settings">
          <md-icon md-svg-icon="images/pictos/menu.svg"></md-icon>
        </md-button>
        <h2>
          <a ui-sref="kct.home" translate>kct.layout.common.appName</a>
        </h2>
      </div>
    </md-toolbar>
    <div layout layout-fill>
      <div layout="column" layout-margin="" flex="grow">

        <div ncy-breadcrumb></div>

        <div class="growl-element" growl></div>

        <div ui-view flex></div>

        <div class="footer">
          <p>{{'kct.layout.footer.text' | translate}}</p>
        </div>

      </div>
    </div>
  </div>
</div>
